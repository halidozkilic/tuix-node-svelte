import{S as t,i as e,s as l,c as s,a as o,m as n,t as i,b as r,d as a,e as c,f,g as d,h as u,j as m,k as h,l as p,o as g,p as b,q as v,r as D,u as w,v as I,w as $,x as A,y as N,z,A as j,B as E}from"./client.d27fdee3.js";import L from"./Row.b5001d66.js";import{D as x}from"./Cell.c2333710.js";import"./Placeholder.e71b9f30.js";function k(t,e,l){const s=t.slice();return s[16]=e[l],s[17]=e,s[18]=l,s}function y(t,e,l){const s=t.slice();return s[19]=e[l],s[18]=l,s}function V(t){let e,l;return e=new L({props:{placeholder:t[0],rowIndex:t[18],rows:t[19]}}),{c(){s(e.$$.fragment)},l(t){o(e.$$.fragment,t)},m(t,s){n(e,t,s),l=!0},p(t,l){const s={};1&l&&(s.placeholder=t[0]),4&l&&(s.rows=t[19]),e.$set(s)},i(t){l||(i(e.$$.fragment,t),l=!0)},o(t){r(e.$$.fragment,t),l=!1},d(t){a(e,t)}}}function B(t,e){let l,s,o,n,i=e[16].title+"",r=e[18];const a=()=>e[4](l,r),I=()=>e[4](null,r);return{key:t,first:null,c(){l=c("div"),s=f(i),o=d(),this.h()},l(t){l=u(t,"DIV",{class:!0,"data-id":!0,style:!0});var e=m(l);s=h(e,i),o=p(e),e.forEach(g),this.h()},h(){b(l,"class","cell svelte-zdflb6"),b(l,"data-id",n=e[16].id),v(l,"background-color",e[16].color),this.first=l},m(t,e){D(t,l,e),w(l,s),w(l,o),a()},p(t,l){r!==(e=t)[18]&&(I(),r=e[18],a())},d(t){t&&g(l),I()}}}function S(t){let e,l,s,o,n=[],a=new Map,f=t[2],h=[];for(let e=0;e<f.length;e+=1)h[e]=V(y(t,f,e));const v=t=>r(h[t],1,1,(()=>{h[t]=null}));let w=t[3];const N=t=>t[16].id;for(let e=0;e<w.length;e+=1){let l=k(t,w,e),s=N(l);a.set(s,n[e]=B(s,l))}return{c(){e=c("div");for(let t=0;t<h.length;t+=1)h[t].c();l=d(),s=c("div");for(let t=0;t<n.length;t+=1)n[t].c();this.h()},l(t){e=u(t,"DIV",{class:!0});var o=m(e);for(let t=0;t<h.length;t+=1)h[t].l(o);o.forEach(g),l=p(t),s=u(t,"DIV",{class:!0,id:!0});var i=m(s);for(let t=0;t<n.length;t+=1)n[t].l(i);i.forEach(g),this.h()},h(){b(e,"class","zone svelte-zdflb6"),b(s,"class","drag-list svelte-zdflb6"),b(s,"id","dragList")},m(t,i){D(t,e,i);for(let t=0;t<h.length;t+=1)h[t].m(e,null);D(t,l,i),D(t,s,i);for(let t=0;t<n.length;t+=1)n[t].m(s,null);o=!0},p(t,[l]){if(5&l){let s;for(f=t[2],s=0;s<f.length;s+=1){const o=y(t,f,s);h[s]?(h[s].p(o,l),i(h[s],1)):(h[s]=V(o),h[s].c(),i(h[s],1),h[s].m(e,null))}for(z(),s=f.length;s<h.length;s+=1)v(s);I()}10&l&&(w=t[3],n=$(n,l,N,1,t,w,a,s,j,B,null,k))},i(t){if(!o){for(let t=0;t<f.length;t+=1)i(h[t]);o=!0}},o(t){h=h.filter(Boolean);for(let t=0;t<h.length;t+=1)r(h[t]);o=!1},d(t){t&&g(e),A(h,t),t&&g(l),t&&g(s);for(let t=0;t<n.length;t+=1)n[t].d()}}}function T(t,e,l){const s=new x;s.activeArea=25;let o,n,i=null,r=[];let a=[{id:1,title:"Drag Item 1",color:"#721919"},{id:2,title:"Drag Item 2",color:"#1f621f"},{id:3,title:"Drag Item 3",color:"#873e75"},{id:4,title:"Drag Item 4",color:"#424242"},{id:10,title:"Drag Item 4",color:"#22228d"}],c=[];function f(t,e){l(0,i={item:s.dragData.item,placeholder:!0,color:"rgb(124 124 124 / 72%)",position:[t,e]})}function d(){null===i.position[1]?c.splice(i.position[0],0,[i]):c[i.position[0]].splice(i.position[1],0,i),l(2,c)}function u(t,e){i&&(i&&null===i.position[1]?c.splice(i.position[0],1):c[i.position[0]].splice(i.position[1],1),l(2,c),l(0,i=null))}function m(t){s.dragData.item=a.find((e=>e.id===Number(t.target.getAttribute("data-id"))))}function h(t){const e=s.elements[1]&&(s.elements[1].classList.contains("field")||s.elements[1].classList.contains("placeholder")),l=s.elements[1]&&s.elements[1].classList.contains("zone");if(e&&!n){const t=s.left<25||s.left>s.elements[1].offsetWidth-25;let e,l;if(s.elements[1].getAttribute("data-placeholder"))return;if(l=function(t,e,l){const s=t[1].closest(".row");return l?Number(s.getAttribute("id")):e>s.offsetHeight-this.activeArea?Number(s.id)+1:e<this.activeArea?Number(s.id):null}(s.elements,s.top,t),null===l)return void(null!==i&&u());t?(r=s.elements,e=s.left>r[1].offsetWidth/2?Number(r[1].id)+1:r[2].classList.contains("field")?Number(r[2].id):Number(r[1].id)):e=null,i||(f(l,e),d(),n=!0,clearTimeout(o),o=setTimeout((()=>{n=!1}),800));const a=(l!==i.position[0]||e!==i.position[1])&&!s.elements[1].getAttribute("data-placeholder");i&&a&&u()}var r;!e&&i&&u(),!e&&l&&(f(0,null),d())}function p(t){i&&i.position&&l(2,c[i.position[0]][i.position[1]||0]=i.item,c),l(0,i=null)}return N((()=>{r.forEach((t=>{s.setElement(t,{onDragStart:m,onDrag:h,onDrop:p})}))})),[i,r,c,a,function(t,e){E[t?"unshift":"push"]((()=>{r[e]=t,l(1,r),l(3,a)}))}]}class W extends t{constructor(t){super(),e(this,t,T,S,l,{})}}export{W as default};
